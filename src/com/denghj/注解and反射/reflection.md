# 反射学习
## 编程语言分类
* 动态语言：是一类在运行时可以改变其结构的语言：例如新的函数，对象、甚至代码可以被引进，已有的函数可以被删除或者是其它结构上的变化
。通俗点说就是在运行时代码可以根据某些条件改变自身的结构。主要动态语言：Object-C、C#、JavaScript、PHP、Python等。
* 静态语言：与动态语言想对应的，运行时结构不可变的语言就是静态语言。如java、c、c++.

~~~
Java不是动态语言，但Java可以称之为“准动态语言”。即Java有一定的动态性，我们可以利用反射机制获得类似动态语言的特性。Java
的动态性让编程的时候更加灵活。
~~~

## 反射概述
* Reflection(反射)是Java被视为动态语言的关键，反射机制允许程序在执行期借助于反射API取得任何类的内部信息，并能直接操作任意对象的内部属性及方法。
~~~java
Class c= Class.forName("java.lang.String");
~~~
* 加载完类之后，在堆内存的方法区就产生了一个Class类型的对象（相同类型（只要元素的纬度一样）的对象类只有一个Class对象），这个对象就包含了完整的类的结构信息。
我们可以通过这个对象看到类的结构。这个对象就像一面镜子，透过这个镜子看到类的结构，所以我们形象的称之为“反射”

比如：

正常方式：引入需要的“包类”名称---》通过new实例化---》取得实例化对象

反射方式：实例化对象---》getClass方法---》得到完整的“包类名称”。

## Java反射机制提供的功能
> 1. 运行时判断任意一个对象所属的类；
> 2. 在运行时构造任意一个类的对象；
> 3. 在运行时判断任意一个类所具有的成员变量和方法；
> 4. 在运行时获取泛型信息；
> 5. 在运行时调用任意一个对象的成员变量和方法；
> 6. 在运行时处理注解；
> 7. 生成动态代理。。。。。等

## Java反射的优缺点
### 优点：
可以实现动态创建对象和编译，体现出很大的灵活性。
### 缺点：
对性能有影响。使用反射基本上是一种解释操作，我们可以告诉JVM，我们希望做什么并且它满足我们的要求。这类操作总是慢于直接执行相同的操作。
## 反射相关API
~~~java
java.lang.Class:代表一个类
java.lang.reflect.Method:代表类的方法
java.lang.reflect.Constructor:代表类的构造器
~~~
## 如何获取Class对象实例
a. 通过类名.class

b. 通过类的实例.getClass()

c. 通过Class.forName(" 类全路径名 ")
## 那些类型可以有Class对象
1. clas:类包括外部类，成员（成员内部类，静态内部类），局部内部类，匿名内部类。
2. interface：接口
3. []:数组
4. enum:枚举
5. annotation：注解
6. primitive Type：基本数据类型
7. void

## 什么时候会发生类的初始化？
> 类的主动引用（一定发生类的初始化）
 1. 当虚拟机启动，先初始化main方法所在的类
 2. new一个类的对象
 3. 调用类的静态成员（除了final常量）和静态方法
 4. 使用java.lang.reflect包的方法对类进行反射调用
 5. 当初始化一个类，如果其父类没有被初始化，则先会初始化它的分类
 
> 类的被动引用（不会发生类的初始化）
 1. 当访问一个静态域时，只有真正声明了这个域的类才会被初始化。如：当通过子类引用父类的静态变量，不会导致子类初始化。
 2. 通过数组定义类引用，不会触发此类的初始化
 3.引用常量不会触发此类的初始化（常量在连接阶段就存入调用类的常量池中 ）
 
         aClass.getDeclaredFields(); //获取类中所有的属性
         aClass.getFields();//只获取类中的public修饰的属性
         aClass.getMethods();//获取本类及父类全部的public方法
         aClass.getDeclaredMethods();//获取本来所有的方法